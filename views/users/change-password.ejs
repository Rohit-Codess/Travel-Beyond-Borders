<% layout("/layouts/boilerplate") %>

<div class="container my-5">
  <div class="col-md-6 offset-md-3">
    <div class="card shadow rounded-4 p-4">
      <h3 class="text-center mb-4 text-success">
        <i class="fa-solid fa-key me-2"></i> Change Password
      </h3>

      <form method="POST" action="/users/change-password" class="needs-validation" id="changePasswordForm" novalidate>
        
        <!-- Current Password -->
        <div class="mb-3">
          <label for="currentPassword" class="form-label fw-semibold">Current Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="currentPassword" name="currentPassword" required minlength="8" />
            <button type="button" class="btn bg-light toggle-password" data-target="currentPassword">
              <i class="fa-solid fa-eye"></i>
            </button>
          </div>
          <div class="invalid-feedback">Enter your current password.</div>
        </div>
        
        <!-- New Password -->
        <div class="mb-3">
          <label for="newPassword" class="form-label fw-semibold">New Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="newPassword" name="newPassword" required minlength="8" />
            <button type="button" class="btn bg-light toggle-password" data-target="newPassword">
              <i class="fa-solid fa-eye"></i>
            </button>
          </div>
          <!-- Password strength text only here -->
          <div id="passwordStrength" class="form-text mt-1"></div>
          <div class="invalid-feedback">
            Password must contain uppercase, lowercase, number, symbol, and 8+ characters.
          </div>
        </div>
        
        <!-- Confirm Password -->
        <div class="mb-3">
          <label for="confirmPassword" class="form-label fw-semibold">Confirm Password</label>
          <div class="input-group">
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required minlength="8" />
            <button type="button" class="btn bg-light toggle-password" data-target="confirmPassword">
              <i class="fa-solid fa-eye"></i>
            </button>
          </div>
          <!-- Confirm Password Match Text -->
          <div id="confirmPasswordMessage" class="form-text mt-1"></div>
          <div class="invalid-feedback">Passwords must match.</div>
        </div>

        <button class="btn btn-primary w-100" type="submit">Update Password</button>

      </form>
    </div>
  </div>
</div>
